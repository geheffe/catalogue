<header id="header">
    <!-- Menu Hamburger -->
    <!-- Menu Hamburger amélioré -->
    <div class="menu-container">
        <div class="hamburger-menu">☰</div>
        <nav class="site-menu">
            <ul>
                {{ $menuItems := slice
                    (dict "path" "" "name" "Accueil" "icon" "🏠")
                    (dict "path" "bienvenue" "name" "Bienvenue" "icon" "🫶")
                    (dict "path" "catalogue" "name" "Catalogue" "icon" "🎨")
                    (dict "path" "affiches" "name" "Affiches" "icon" "🖼️") 
                    (dict "path" "infos" "name" "Des infos" "icon" "📜" "submenu" (slice
                        (dict "path" "infos" "name" "🫱 Infos accueil")
                        (dict "path" "infos/infos_p1" "name" "👉 Infos page n°1")
                        (dict "path" "infos/infos_p2" "name" "👉 Infos page n°2")
                        (dict "path" "infos/et_aussi" "name" "👉 ...et aussi")
                    ))
                    (dict "path" "pele_mele" "name" "Pêle-mêle" "icon" "🍂")
                    (dict "path" "presentation" "name" "Présentation" "icon" "🧚🏻")
                }}
                {{ range $menuItems }}
    <li class="{{ if .submenu }}has-submenu{{ end }}">
    <a href="{{ .path | relURL }}" class="main-link">{{ .name }}<span class="icon-space"> </span>{{ .icon }}</a> <!-- Ajout de classe -->
    {{ if .submenu }}
    <ul class="submenu">
        {{ range .submenu }}
        <li><a href="{{ .path | relURL }}">{{ .name }}</a></li>
        {{ end }}
    </ul>
    {{ end }}
</li>
{{ end }}
            </ul>
        </nav>
        <div class="close-menu" style="display:none;">✕</div> <!-- Croix cachée par défaut -->
    </div>
    

    <!-- Grab the base URL, pull out the path, then count directories -->
    {{- $base_url_parsed := urls.Parse .Site.BaseURL -}}
    {{- $base_dir := trim $base_url_parsed.Path "/" -}}
    {{- $base_part_cnt := cond (ne $base_dir "") (len (split $base_dir "/" )) 0 -}}

    <!-- Grab the current URL, separate it out -->
    {{- $url_parsed := urls.Parse .Permalink -}}
    {{- $trimmed_url := trim $url_parsed.Path "/" -}}
    {{- $pre_url_parts := split $trimmed_url "/" -}}
    {{- $pre_part_count := len $pre_url_parts -}}

    <!-- Drop the part of the current URL that's the base URL -->
    {{- $url_parts := last (sub $pre_part_count $base_part_cnt) $pre_url_parts -}}
    {{- $part_count := len $url_parts -}}

    <!-- Determine how much of the URL to use (sometimes last part is blank) -->
    {{- $last_part := index $url_parts (sub $part_count 1) -}}
    {{- $use_part_cnt := cond (eq (trim $last_part " ") "") (sub $part_count 1) $part_count -}}

    <!-- Determine whether to use URL components or titles for breadcrumb -->
    {{- $crumb_is_title := .Site.Params.breadcrumb_use_title | default false -}}

    <!-- Build the breadcrumb - base URL link, path links for each dir, cur location text -->
    <a href="{{ .Site.BaseURL }}"><strong>{{ .Site.Title }}</strong></a>
    {{- if gt $use_part_cnt 0 -}}
        {{- range $cur_ind, $element := first (sub $use_part_cnt 1) $url_parts -}}
            {{- $path := string (delimit (first (add $cur_ind 1) $url_parts) "/") -}}
            {{- $part := $element | humanize }}
            / <a href="{{ $.Site.BaseURL }}{{ $path }}"><strong>{{ cond $crumb_is_title ((($.Site.GetPage $path).Title) | default $part) $part }}</strong></a>
        {{- end -}}
        {{- $cur_part := (index $url_parts (sub $use_part_cnt 1)) | humanize }}
        / {{ cond $crumb_is_title (.Title | default $cur_part) $cur_part }}
    {{- end }}
    </h1>
    {{ partial "navigation.html" . }}
</header>

<style>
/* Styles améliorés pour le thème sombre */
.menu-container {
    position: absolute;
    top: 20px;
    right: 10px;
    z-index: 1000;
}

.hamburger-menu {
    /* Carré parfait */
    width: 40px;
    height: 40px;
    /* Centrage du symbole ☰ */
    display: flex;
    justify-content: center;
    align-items: center;
    /* Styles visuels */
    font-size: 24px;
    background: rgba(0,0,0,0.8);
    color: #FFD700;
    border: 2px solid rgba(255,215,0,0.4);
    border-radius: 12px;
    /* Animation */
    transition: all 0.3s ease;
}

.hamburger-menu:hover {
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(255,215,0,0.3);
}

.site-menu {
    display: none;
    position: absolute;
    right: 0;
    top: 100%;
    background: 
        /* URL de l'image */
        url('{{ "images/red-background.jpg" | relURL }}') 
        /* Répétition et positionnement */
        repeat center center !important;
    border: 3px solid rgba(255, 215, 0, 0.3) !important; /* Bordure or */
    padding: 15px 0; /* Plus d'espace vertical */
    min-width: 250px; /* Largeur augmentée (était 200px) */
    width: auto; /* S'adapte au contenu */
    border-radius: 20px; /* Coins plus arrondis */
    box-shadow: 0 5px 15px rgba(0,0,0,0.6);
    --menu-text-color: #FFD700; /* Or */
    --menu-text-transform: none; /* Annule les majuscules */
}

.site-menu ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.site-menu li {
    padding: 8px 15px !important; /* Réduit l'espacement horizontal */
    white-space: nowrap;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    transition: transform 0.3s;
}

.site-menu li:hover {
    transform: translateX(5px);
}

.site-menu li:last-child {
    border-bottom: none;
}


.site-menu a {
    color: var(--menu-text-color) !important;
    text-transform: var(--menu-text-transform) !important;
    font-size: 1.2rem !important;
    letter-spacing: normal !important;
    text-decoration: none;
    transition: color 0.2s;
    display: block;
    letter-spacing: 0.5px; /* Espacement général */
}

.site-menu a:hover {
    color: #4fc3f7;
    text-decoration: none;
}

.site-menu.show {
    display: block;
}

.icon-space {
    display: inline-block;
    width: 15px;
}

/* Sous-menu stylisé */
.site-menu .submenu {
    display: none;
    position: absolute;
    left: 0;
    top: 100%;
    min-width: max-content;
    width: 100%;
    background: 
        /* URL de l'image */
        url('{{ "images/red-background.jpg" | relURL }}') 
        /* Répétition et positionnement */
        repeat center center !important;
    border: 2px solid rgba(255,215,0,0.3);
    border-radius: 0 0 15px 15px;
    padding: 5px 0;
    z-index: 1001;
    animation: fadeIn 0.3s ease-out;
}

.site-menu li.has-submenu:hover > .submenu {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Règles critiques */
.site-menu.show {
    display: block !important;
}

/* Solution définitive - Mobile seulement */
@media (max-width: 768px) {
    .mobile-arrow {
        display: inline-block;
        margin-left: 30px !important; /* Espace fixe */
        padding: 0 10px; /* Zone cliquable */
        font-size: 1.2rem;/* 0.9em */
    }
    .site-menu a {
        font-size: 2.2rem !important; /* Augmentation */
        line-height: 1.5 !important;
        padding: 12px 20px !important; /* Meilleure aération */
    }
    .submenu a {
        font-size: 2rem !important; /* Légèrement plus petit */
    }
    .site-menu li.has-submenu.opened > a::after {
        color: white !important;
        transform: translateY(-50%) rotate(180deg);
    }
}


.close-menu {
    position: fixed; /* Reste en place au scroll */
    top: 25px;
    right: 25px;
    color: #FFD700;
    font-size: 28px;
    cursor: pointer;
    z-index: 1002;
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
    transition: opacity 0.3s;
}
.close-menu:hover {
    opacity: 0.8;
}
  
</style>

